!function(){function t(t){p.push(t),store.set("gg",p)}function n(){var t=$(".task-list");t.html(null);for(var n=0;n<p.length;n++){var e=i(p[n],n);t.append(e)}a(),l(),f()}function i(t,n){return'<li  data-index="'+n+'"><hr><input type="checkbox" '+(t.complated?"checked":"")+'   class="complate"><p class="content">'+t.content+'</p><div class="right"><span class="delete r-main">删除</span><span class="detail r-main">详细</span></div></li>'}function a(){$(".delete.r-main").click(function(){e($(this).parent().parent().data("index"))})}function e(t){confirm("你确定要删除么")&&(p.splice(t,1),s())}function s(){store.set("gg",p),n()}function l(){$(".detail.r-main").click(function(){var t=$(this).parent().parent().data("index");c(p[t],t)})}function c(t,n){var i='<div class="task-detail-mask"></div><div class="task-detail"><form class="up-task"><h2 class="content">'+(t.content||"")+'</h2><div class="input-item"><input type="text" class="db-content"></div><div class="input-item"><textarea class="taile">'+(t.tatil||"")+'</textarea></div><div class="remind input-item"><label for="b">提醒时间</label><input id="b" class="datetime" type="date" value="'+t.datetime+'"></div><div class="input-item"><button class="ut-data">更新</button></div><div class="colse">X</div></form></div>';$(".container .task-list").after(i),d(),o(n),r()}function d(){$(".task-detail-mask,.colse").click(function(){$(".task-detail-mask,.task-detail").remove()})}function o(t){$(".up-task").on("submit",function(i){i.preventDefault();var a={};a.content=$(this).find(".content").text(),a.tatil=$(this).find(".taile").val(),a.datetime=$(this).find(".datetime").val(),u(a,t),$(".task-detail-mask,.task-detail").remove(),n()})}function r(){$(".up-task .content").dblclick(function(){var t=$(this),n=$(".container .up-task .db-content");t.hide(),n.show(),n.focus(),n.on("blur",function(){t.show(),n.hide(),n.val()&&t.text(n.val())})})}function u(t,n){p[n]=$.extend({},p[n],t),store.set("gg",p)}function f(){$(".task-list .complate").click(function(){var t=$(this).parent().data("index");p[t].complated?(u({complated:!1},t),$(".container .task-list").find("li").eq(t).removeClass(),$(".container .task-list").find("li").eq(t).find("hr").hide()):(u({complated:!0},t),$(".container .task-list").find("li").eq(t).addClass("dali"),$(".container .task-list").find("li").eq(t).find("hr").show())})}var p=[],v=$(".add-task");p=store.get("gg")||[],n(),v.on("submit",function(i){i.preventDefault();var a={};a.content=v.find("input").eq(0).val(),a.content&&(t(a),n(),v.find("input").eq(0).val(null))})}();